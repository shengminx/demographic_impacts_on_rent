<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<<<<<<< HEAD
<meta name="author" content="Shengmin Xiao">
<meta name="author" content="Alex Tenpas">
<meta name="author" content="Denvir Higgins">
<meta name="dcterms.date" content="2025-04-16">
=======
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399

<title>What Drives Rent?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
<<<<<<< HEAD
=======
  margin-bottom: 0em;
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="report_files/libs/clipboard/clipboard.min.js"></script>
<script src="report_files/libs/quarto-html/quarto.js"></script>
<script src="report_files/libs/quarto-html/popper.min.js"></script>
<script src="report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="report_files/libs/quarto-html/anchor.min.js"></script>
<link href="report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="report_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="report_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="report.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">What Drives Rent?</h1>
<p class="subtitle lead">A deep dive into people, place and price.</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Shengmin Xiao <a href="mailto:shengminx@berkley.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            UC Berkeley, School of Information
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Alex Tenpas <a href="mailto:alextenpas@berkeley.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            UC Berkeley, School of Information
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Denvir Higgins <a href="mailto:dehiggin@berkeley.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            UC Berkeley, School of Information
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
<<<<<<< HEAD
      <p class="date">April 16, 2025</p>
=======
      <p class="date">today</p>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    <p>In this position, you can include the short abstract of your report.</p>
  </div>
</div>


</header>


<<<<<<< HEAD
=======
<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">1. Introduction</h3>
<p>As young professionals and early-career individuals grappling with housing unaffordability, we seek to understand how much socioeconomic disparities influence rental markets. This analysis explores the patterns in rent prices across the United States, paying particular attention to its relationship with demographic and socioeconomic data. The central question guiding this research is: What patterns and associations can be observed between rent prices and the demographics of the people across different regions? While the relationship between rent prices and demographics has been widely researched, with many studies aiming to identify key predictors and understand their impact on housing affordability, this paper contributes by applying several regression models and integrating geographic data into the analysis. By identifying these linkages, we aim to provide a data-driven baseline for policymakers, urban planners, advocacy groups, and particularly for renters like ourselves to make informed decisions, advocate for fairer housing policies, and navigate the rental market with greater awareness of systemic inequalities. We predict that income will have the most direct impact on housing prices, given how Section 8 housing prices are set, with educational attainment and marital status also showing strong correlations.</p>
</section>
<section id="description-of-the-data-source" class="level3">
<h3 class="anchored" data-anchor-id="description-of-the-data-source">2. Description of the Data Source</h3>
<<<<<<< HEAD
<p>To explore these associations, 3 publicly available datasets were utilized. The U.S. Census produces population, demographic, and housing unit estimates through the annual American Community Survey (ACS) that collects data continuously throughout the year. Every year, 3.5 million addresses are randomly sampled, and responses are required by law. The S0601 dataset for 2023 is used which contains population characteristics from each zip code such as income, race, and education. The Department of Housing and Urban Development’s (HUD) Office of Policy Development and Research establishes the Fair Market Rents (FMR) at least annually for the purpose of determining housing assistance payments as part of the Section 8. The FMR is computed using the Census Bureau’s geographic area definition, Census Bureau’s 5-year ACS data as the base year rent, and Bureau of Labor Statistics’s Consumer Price of Index as the rent inflation rate. HUD also produces the HUD-USPS Zip Crosswalk Files which associates Census Bureau geographies with USPS Vacancy Data which is updated quarterly. This analysis uses the 2023 Q2 ZIP-TRACT crosswalk file to filter out zip codes with low residential ratio.</p>
=======
<p>To explore these associations, 3 publicly available datasets were utilized. The U.S. Census produces population, demographic, and housing unit estimates through the annual American Community Survey (ACS) that collects data continuously throughout the year. Every year, 3.5 million addresses are randomly sampled, and responses are required by law. The S0601 dataset for 2023 <span class="citation" data-cites="uscensus_s0601">(<a href="#ref-uscensus_s0601" role="doc-biblioref">U.S. Census Bureau, n.d.</a>)</span> is used which contains population characteristics from each zip code such as income, race, and education. The Department of Housing and Urban Development’s (HUD) Office of Policy Development and Research establishes the Fair Market Rents (FMR) <span class="citation" data-cites="hud_fmr">(<a href="#ref-hud_fmr" role="doc-biblioref">HUD User’s Office of Policy Development and Research, n.d.a</a>)</span> at least annually for the purpose of determining housing assistance payments as part of the Section 8. The FMR is computed using the Census Bureau’s geographic area definition, Census Bureau’s 5-year ACS data as the base year rent, and Bureau of Labor Statistics’s Consumer Price of Index as the rent inflation rate. HUD also produces the HUD-USPS Zip Crosswalk Files <span class="citation" data-cites="hud_zipcrosswalk">(<a href="#ref-hud_zipcrosswalk" role="doc-biblioref">HUD User’s Office of Policy Development and Research, n.d.b</a>)</span> which associates Census Bureau geographies with USPS Vacancy Data which is updated quarterly. This analysis uses the 2023 Q2 ZIP-TRACT crosswalk file to filter out zip codes with low residential ratio.</p>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</section>
<section id="data-wrangling" class="level3">
<h3 class="anchored" data-anchor-id="data-wrangling">3. Data Wrangling</h3>
<p>The data pipeline, constructed in Python with NumPy and Pandas, combines data from the three data sources. Data source 1 contained 33773 rows and 427 columns, including a ‘Geography’ column from which the zip codes were extracted. The column name codes from data source 1 are matched to the data dictionary provided for this dataset by the Census. Data source 2 had 27331 rows and 18 columns, including zip code, HUD area code, rent area name, median rent value of five housing types by number of bedrooms, as well as the 90th percentile and 110th percentile rent values. After merging data source 1 and 2 on zip code values, there were 20855 rows and 445 columns total. This combined dataset was then filtered down to 28 columns to gather demographic information such as race, age, gender, marital status, educational achievement, income, and languages spoken at home, as well as median rent values for the five housing types, rent area, and zip code. Data source 3, containing 188563 rows and 8 columns, is filtered on residential ratios per tract, which is a sub group within a zip code. A tract of a zip code is defined as residential if there is a predominant residential population, which is determined to be 80% or more housing units. The filtered output of data source 3 has 35434 rows and 2 columns, one zip code column and one ratio column. Finally, after merging all three data sources, the output data frame is 18988 rows and 36 columns. To ensure identical samples from equal distributions, we choose 1000 random samples from five regions of states - the Midwest, Northeast, Southeast, Southwest, and Northwest. As a result, the processed dataset has 5000 rows and 37 columns, with one column added for each region. See the resulting columns in Appendix A.</p>
</section>
<section id="operationalization" class="level3">
<h3 class="anchored" data-anchor-id="operationalization">4. Operationalization</h3>
<p>To analyze how demographics relate to rent prices across U.S. regions, we define our outcome variable as the Small Area Fair Market Rent 1BR (SAFMR.1BR) for one-bedroom units, drawn from HUD’s rent dataset across five regions. We selected demographic predictors including median household income, racial composition, the percentage of adults that have less than a high school degree, residents who are born in-state, and marital status. These variables capture key aspects of economic well-being and social structure, and were initially chosen based on theoretical relevance. For data preparation, we started with 250000 rows and 450 columns across three datasets. Merging these sources on ZIP code resulted in a removal of 230000 rows and 410 columns. ZIP codes with missing values were excluded before random sampling to maintain data quality and ensure accurate calculations. The final data frame focused on isolating residential areas and balanced regional representation to ensure compatibility across diverse geographic contexts. During statistical analysis, VIF values were used to assess multicollinearity, of which several variables were part of a closed system that added up to 100% and skyrocketed the VIF values to 40,000. Upon removing portions of these closed systems based on very and extremely significant p-values, VIF values ranged from 1.3 to 2.5. This methodological design supports our central inquiry into how demographic disparities shape rent prices, reflecting the lived realities of renters navigation affordability challenges across the U.S.</p>
<<<<<<< HEAD
</section>
<section id="model-specification" class="level3">
<h3 class="anchored" data-anchor-id="model-specification">6. Model Specification</h3>
<p>The stargazer plot in Appendix B tests the presence of each predictor on the linear regression, aiming to maximize the F-statistic and R2 value. Model 4 is the optimized model, dropping percent race two or more races and percent poverty status in its analysis. The coefficients of this optimized model highlight important relationships between predictor and 1-bedroom rent prices. In particular, income, age, and racial composition are strong predictors of these prices. Education levels and local nativity show a notable negative relationship. Language diversity correlates positively with higher rent levels. Some predictors, like median income in the past year and percent race black, contribute weakly to the optimized model. The predictor heat map visualizes the correlation between predictors. The red diagonal is highlighting the correlation of a predictor with itself - none of the relationships between predictors are as strongly correlated as the center diagonal.</p>
=======
<p>::: {.cell} ::: {.cell-output .cell-output-stdout}</p>
<pre><code>                            Median.Age                        Percent.married 
                              1.255226                               1.368787 
                   Percent.Race..Asian          Percent.less.than.high.school 
                              1.567589                               2.269572 
            Median.income.in.past.year     Percent.born.in.state.of.residence 
                              1.679451                               1.257988 
Percent.speak.another.language.at.home 
                              2.472269 </code></pre>
<p>::: :::</p>
</section>
<section id="model-specification" class="level3">
<h3 class="anchored" data-anchor-id="model-specification">5. Model Specification</h3>
<p>The stargazer plot in Appendix B tests the presence of each predictor on the linear regression, aiming to maximize the F-statistic and R2 value. Model 4 is the optimized model, dropping percent race two or more races and percent poverty status in its analysis. The coefficients of this optimized model highlight important relationships between predictor and 1-bedroom rent prices. In particular, income, age, and racial composition are strong predictors of these prices. Education levels and local nativity show a notable negative relationship. Language diversity correlates positively with higher rent levels. Some predictors, like median income in the past year and percent race black, contribute weakly to the optimized model. The predictor heat map visualizes the correlation between predictors. The red diagonal is highlighting the correlation of a predictor with itself - none of the relationships between predictors are as strongly correlated as the center diagonal.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                           Var1       Var2      value
1                    Median.Age Median.Age  1.0000000
2           Percent.Race..Asian Median.Age -0.1334763
3           Percent.Race..Black Median.Age -0.1955274
4 Percent.less.than.high.school Median.Age -0.2510203
5               Percent.married Median.Age  0.3368891
6    Median.income.in.past.year Median.Age  0.0929495</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/correlation-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="model-assumptions" class="level3">
<h3 class="anchored" data-anchor-id="model-assumptions">6. Model Assumptions</h3>
<ol type="1">
<li><strong>Independent and Identical Distribution (IID)</strong>: Data was drawn from equal distributions of regions across the U.S. Each data point is a Zip Code, which are independent from each other.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/IID-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li><strong>Constant Error Variance</strong>: Homoskedastic Errors can be rejected with a Breusch-Pagan values of 223.39 and P-Value &lt; 2.2e-16.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/error%20variance-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    studentized Breusch-Pagan test

data:  best_model
BP = 124.06, df = 7, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
<ol start="3" type="1">
<li><strong>Normal Distribution of Errors</strong>: There is a heavy tailed distribution in the form of a leptokurtic kurtosis meaning normal distribution of error can be rejected.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/normal%20distribution%20of%20errors-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.481453</code></pre>
</div>
</div>
<ol start="4" type="1">
<li><strong>Linear Conditional Expectation</strong>: There exists a linear fit between predictors and dependent variables. However, heavy tailed distribution from previous assumptions lead to the rejection of the linear conditional expectation.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/blp-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="model-results-and-interpretation" class="level3">
<h3 class="anchored" data-anchor-id="model-results-and-interpretation">7. Model Results and Interpretation</h3>
<p>A report that scores in the top level will correctly interpret statistical significance, clearly interpret practical significance, and comment on the broader implications of the results. It may want to include statistical tests besides the standard t-tests for regression coefficients. When discussing practical significance, comment on both the direction and magnitude of your coefficients, placing them in context so the reader can understand if they are important. To help the reader understand your fitted model, you may want to describe hypothetical datapoints (e.g.&nbsp;a hypothetical person with 1 cat is predicted to spend $2400 on pet care. That rises to $3200 for a hypothetical person with 2 cats…).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/predictions-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/plot%20region-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References</h3>
<ol type="1">
<li>U.S. Census Bureau, “S0601 Selected Characteristics of the Total and Native Populations in the United States”, &lt;data.census.gov/table?q=s0601&gt;, accessed on March 25, 2025.</li>
<li>HUD User’s Office of Policy Development and Research, “Fair Market Rents”, &lt;www.huduser.gov/portal/datasets/fmr.html&gt;, accessed on March 25, 2025.</li>
<li>HUD User’s Office of Policy Development and Research, “HUD-USPS ZIP Crosswalk Files” &lt;www.huduser.gov/apps/public/uspscrosswalk/home&gt;, accessed on March 25, 2025. ::: {#refs}</li>
</ol>
</section>
<section id="appendix" class="level3">
<h3 class="anchored" data-anchor-id="appendix">Appendix</h3>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
<div class="cell" data-tbl-cap="Stargazer table for model comparison" data-tbl-pos="t">
<table style="text-align:center">
<caption>
<strong>Linear Regression Results: Model Comparison</strong>
</caption>
<tbody><tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="4">
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="4" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td colspan="4">
SAFMR 1BR
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1)
</td>
<td>
(2)
</td>
<td>
(3)
</td>
<td>
(4)
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Median.Age
</td>
<td>
<<<<<<< HEAD
3.333<sup>***</sup>
=======
2.468<sup>*</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
<<<<<<< HEAD
3.260<sup>***</sup>
=======
2.348<sup>*</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<<<<<<< HEAD
(1.172)
=======
(1.330)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
<<<<<<< HEAD
(1.159)
=======
(1.336)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Percent.married
</td>
<td>
<<<<<<< HEAD
-5.028<sup>***</sup>
=======
-5.859<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
<<<<<<< HEAD
-4.764<sup>***</sup>
=======
-5.703<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<<<<<<< HEAD
(1.098)
=======
(1.190)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
<<<<<<< HEAD
(0.985)
=======
(0.941)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Percent.Race..Black
</td>
<td>
<<<<<<< HEAD
1.350<sup>**</sup>
</td>
<td>
2.325<sup>***</sup>
=======
0.707
</td>
<td>
1.830<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
<<<<<<< HEAD
1.217<sup>**</sup>
=======
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<<<<<<< HEAD
(0.604)
</td>
<td>
(0.568)
=======
(0.599)
</td>
<td>
(0.531)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
<<<<<<< HEAD
(0.582)
=======
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Percent.Race..Asian
</td>
<td>
<<<<<<< HEAD
12.998<sup>***</sup>
</td>
<td>
27.129<sup>***</sup>
=======
14.538<sup>***</sup>
</td>
<td>
27.141<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
<<<<<<< HEAD
12.752<sup>***</sup>
=======
14.383<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<<<<<<< HEAD
(2.297)
</td>
<td>
(2.456)
=======
(2.058)
</td>
<td>
(2.160)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
<<<<<<< HEAD
(2.258)
=======
(1.971)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Percent.Race..Two.or.more.races
</td>
<td>
<<<<<<< HEAD
0.677
=======
0.445
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<<<<<<< HEAD
(1.677)
=======
(1.854)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Percent.less.than.high.school
</td>
<td>
<<<<<<< HEAD
-5.651<sup>***</sup>
</td>
<td>
6.188<sup>***</sup>
=======
-6.666<sup>***</sup>
</td>
<td>
5.315<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
<<<<<<< HEAD
-6.052<sup>***</sup>
=======
-7.163<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<<<<<<< HEAD
(1.765)
</td>
<td>
(1.410)
=======
(1.894)
</td>
<td>
(1.307)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
<<<<<<< HEAD
(1.707)
=======
(1.814)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Median.income.in.past.year
</td>
<td>
0.016<sup>***</sup>
</td>
<td>
0.017<sup>***</sup>
</td>
<td>
<<<<<<< HEAD
0.020<sup>***</sup>
=======
0.019<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
0.016<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.001)
</td>
<td>
(0.001)
</td>
<td>
(0.001)
</td>
<td>
(0.001)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Percent.born.in.state.of.residence
</td>
<td>
<<<<<<< HEAD
-4.517<sup>***</sup>
=======
-3.721<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
<<<<<<< HEAD
-4.513<sup>***</sup>
=======
-3.715<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<<<<<<< HEAD
(0.519)
=======
(0.537)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
<<<<<<< HEAD
(0.501)
=======
(0.521)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Percent..100.poverty.status
</td>
<td>
<<<<<<< HEAD
-1.210
=======
-1.681
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<<<<<<< HEAD
(1.639)
=======
(1.664)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Percent.speak.another.language.at.home
</td>
<td>
<<<<<<< HEAD
8.562<sup>***</sup>
=======
8.657<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
<<<<<<< HEAD
8.831<sup>***</sup>
=======
8.821<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<<<<<<< HEAD
(0.963)
=======
(1.120)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
<td>
</td>
<td>
</td>
<td>
<<<<<<< HEAD
(0.867)
=======
(0.937)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
<<<<<<< HEAD
718.457<sup>***</sup>
</td>
<td>
225.816<sup>***</sup>
</td>
<td>
270.942<sup>***</sup>
</td>
<td>
692.924<sup>***</sup>
=======
782.471<sup>***</sup>
</td>
<td>
249.760<sup>***</sup>
</td>
<td>
310.450<sup>***</sup>
</td>
<td>
760.657<sup>***</sup>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<<<<<<< HEAD
(116.189)
</td>
<td>
(55.381)
</td>
<td>
(42.572)
</td>
<td>
(96.345)
=======
(113.783)
</td>
<td>
(56.077)
</td>
<td>
(43.217)
</td>
<td>
(87.146)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
<td>
</td>
<td>
</td>
<td>
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
1,500
</td>
<td>
1,500
</td>
<td>
1,500
</td>
<td>
1,500
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
<<<<<<< HEAD
0.634
</td>
<td>
0.532
</td>
<td>
0.372
</td>
<td>
0.634
=======
0.597
</td>
<td>
0.501
</td>
<td>
0.335
</td>
<td>
0.596
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
<<<<<<< HEAD
0.632
</td>
<td>
0.531
</td>
<td>
0.372
</td>
<td>
0.632
=======
0.594
</td>
<td>
0.499
</td>
<td>
0.335
</td>
<td>
0.594
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
<<<<<<< HEAD
304.387 (df = 1489)
</td>
<td>
343.584 (df = 1495)
</td>
<td>
397.512 (df = 1498)
</td>
<td>
304.315 (df = 1491)
=======
319.804 (df = 1489)
</td>
<td>
355.178 (df = 1495)
</td>
<td>
409.369 (df = 1498)
</td>
<td>
319.794 (df = 1492)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
<<<<<<< HEAD
258.114<sup>***</sup> (df = 10; 1489)
</td>
<td>
424.862<sup>***</sup> (df = 4; 1495)
</td>
<td>
888.496<sup>***</sup> (df = 1; 1498)
</td>
<td>
322.634<sup>***</sup> (df = 8; 1491)
=======
220.304<sup>***</sup> (df = 10; 1489)
</td>
<td>
374.565<sup>***</sup> (df = 4; 1495)
</td>
<td>
755.228<sup>***</sup> (df = 1; 1498)
</td>
<td>
314.326<sup>***</sup> (df = 7; 1492)
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
</td>
</tr>
<tr>
<td colspan="5" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td colspan="4" style="text-align:right">
<sup><em></em></sup><em>p&lt;0.1; <sup><strong></strong></sup><strong>p&lt;0.05; <sup></sup></strong></em>p&lt;0.01
</td>
</tr>
</tbody></table>
</div>
<<<<<<< HEAD
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                           Var1       Var2      value
1                    Median.Age Median.Age  1.0000000
2           Percent.Race..Asian Median.Age -0.1334763
3           Percent.Race..Black Median.Age -0.1955274
4 Percent.less.than.high.school Median.Age -0.2510203
5               Percent.married Median.Age  0.3368891
6    Median.income.in.past.year Median.Age  0.0929495</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/correlation-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="model-assumptions" class="level3">
<h3 class="anchored" data-anchor-id="model-assumptions">7. Model Assumptions</h3>
<p>A report that scores in the top-level has provided an thorough and precise assessment of the assumptions supporting the regression. The list of assumptions is appropriate given the sample size and modeling goals. Each assumption is evaluated fairly, and discussed defensively - without overstating how credible the assumption is or rendering a final up-or-down judgement on the assumption. The report will not miss any important violations of any assumption. Where possible, the report discusses the consequences for the analysis of a violated assumption.</p>
<ol type="1">
<li><strong>Independent and Identical Distribution (IID):</strong> Data was drawn from equal distributions of regions across the U.S. Each data point is a Zip Code, which are independent from each other.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/IID-1.png" class="img-fluid figure-img" width="816"></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li><strong>Constant Error Variance:</strong> Homoskedastic Errors can be rejected with a Breusch-Pagan values of 223.39 and P-Value &lt; 2.2e-16.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/error%20variance-1.png" class="img-fluid figure-img" width="816"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    studentized Breusch-Pagan test

data:  best_model
BP = 138.32, df = 8, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
<ol start="3" type="1">
<li><strong>No Perfect Collinearity:</strong> hmmm</li>
<li><strong>Normal Distribution of Errors:</strong> There is a heavy tailed distribution in the form of a leptokurtic kurtosis meaning normal distribution of error can be rejected.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/normal%20distribution%20of%20errors-1.png" class="img-fluid figure-img" width="816"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.459726</code></pre>
</div>
</div>
<ol start="4" type="1">
<li><strong>Linear Conditional Expectation:</strong> There exists a linear fit between predictors and dependent variables. However, heavy tailed distribution from previous assumptions lead to the rejection of the linear conditional expectation.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/blp-1.png" class="img-fluid figure-img" width="816"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="model-results-and-interpretation" class="level3">
<h3 class="anchored" data-anchor-id="model-results-and-interpretation">8. Model Results and Interpretation</h3>
<p>A report that scores in the top level will correctly interpret statistical significance, clearly interpret practical significance, and comment on the broader implications of the results. It may want to include statistical tests besides the standard t-tests for regression coefficients. When discussing practical significance, comment on both the direction and magnitude of your coefficients, placing them in context so the reader can understand if they are important. To help the reader understand your fitted model, you may want to describe hypothetical datapoints (e.g.&nbsp;a hypothetical person with 1 cat is predicted to spend $2400 on pet care. That rises to $3200 for a hypothetical person with 2 cats…).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/predictions-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="report_files/figure-html/plot-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="references" class="level1">
<h1>References</h1>
<div id="refs" role="list">

</div>
</section>

</main>
=======

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-hud_fmr" class="csl-entry" role="listitem">
HUD User’s Office of Policy Development and Research. n.d.a. <span>“<span>Fair Market Rents</span>.”</span> <a href="https://www.huduser.gov/portal/datasets/fmr.html" class="uri">https://www.huduser.gov/portal/datasets/fmr.html</a>.
</div>
<div id="ref-hud_zipcrosswalk" class="csl-entry" role="listitem">
———. n.d.b. <span>“<span>HUD-USPS ZIP Crosswalk Files</span>.”</span> <a href="https://www.huduser.gov/apps/public/uspscrosswalk/home" class="uri">https://www.huduser.gov/apps/public/uspscrosswalk/home</a>.
</div>
<div id="ref-uscensus_s0601" class="csl-entry" role="listitem">
U.S. Census Bureau. n.d. <span>“<span class="nocase">S0601 Selected Characteristics of the Total and Native Populations in the United States</span>.”</span> <a href="https://data.census.gov/table?q=s0601" class="uri">https://data.census.gov/table?q=s0601</a>.
</div>
</div></section></div></main>
>>>>>>> b389adbe4a360c0cb1d7e89e1f5d7edf9f0f2399
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>